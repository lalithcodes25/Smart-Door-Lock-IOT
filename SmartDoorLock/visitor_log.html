<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visitor Log - ThingSpeak</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
        th { background: #007bff; color: white; }
    </style>
</head>
<body>
    <h1>Visitor Log</h1>
    <table id="visitorTable">
        <thead>
            <tr>
                <th>Timestamp</th>
                <th>Image URL</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        const channelID = "YOUR_CHANNEL_ID";
        const readAPIKey = "YOUR_READ_API_KEY";

        // Fetch data from ThingSpeak
        fetch(`https://api.thingspeak.com/channels/${channelID}/feeds.json?api_key=${readAPIKey}&results=10`)
            .then(response => response.json())
            .then(data => {
                const feeds = data.feeds;
                const tableBody = document.getElementById("visitorTable").getElementsByTagName("tbody")[0];
                
                feeds.forEach(feed => {
                    const row = tableBody.insertRow();
                    row.insertCell(0).innerText = feed.created_at;

                    if (feed.field4) {
                        const imgLink = document.createElement("a");
                        imgLink.href = feed.field4;
                        imgLink.target = "_blank";
                        imgLink.textContent = "View Image";
                        row.insertCell(1).appendChild(imgLink);
                    } else {
                        row.insertCell(1).innerText = "No Image";
                    }
                });
            })
            .catch(error => console.error("Error fetching data:", error));
    </script>
</body>
</html>
